/* ==========================================================
   TOKENS — единый источник правды для тем и скейлов
   Файл: styles/tokens.css
   ========================================================== */

/* =============== PRIMITIVE TOKENS (скейлы) =============== */
:root {
  /* Spacing — 8pt grid */
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-8: 32px;

  /* Radius */
  --radius-1: 8px;
  --radius-2: 12px;
  --radius-3: 16px;
  --radius-pill: 9999px;

  /* Typography */
  --font-sans: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Inter, Arial, "Apple Color Emoji","Segoe UI Emoji";
  --fs-xs: 12px;
  --fs-sm: 14px;
  --fs-md: 15px;
  --fs-lg: 16px;
  --fs-xl: 20px;

  /* Motion */
  --dur-1: .14s;
  --dur-2: .2s;
  --dur-3: .3s;
  --ease: cubic-bezier(.22,1,.36,1);

  /* Elevation (используются компонентами) */
  --shadow-sm: 0 2px 6px rgba(0,0,0,.08);
  --shadow-md: 0 8px 24px rgba(0,0,0,.12);
  --shadow-lg: 0 18px 40px rgba(0,0,0,.18);
}

/* ==========================================================
   THEME PALETTES (только «краски»; семантика ниже)
   По умолчанию считаем светлую тему. Если атрибут data-theme
   не задан, применится :root. Ниже добавлен авто-переключатель
   на тёмную через prefers-color-scheme.
   ========================================================== */
[data-theme="light"], :root {
  --palette-bg: #f9fafb;
  --palette-surface: #ffffff;
  --palette-text: #1f2937;
  --palette-text-muted: #6b7280;
  --palette-border: #e5e7eb;
  --palette-border-strong: #d1d5db;
  --palette-hover: #f3f4f6;

  --palette-brand: #4f46e5;   /* индиго */
  --palette-brand-2: #7c3aed; /* фиолет */

  /* moods */
  --palette-good: #22c55e;    /* зеленый */
  --palette-neutral: #eab308; /* жёлтый */
  --palette-sad: #3b82f6;     /* синий */
}

[data-theme="dark"] {
  --palette-bg:            #0f172a; /* ок */
  --palette-surface:       #1b2436; /* было #1e293b → чуть светлее */
  --palette-text:          #e8edf5; /* было #f1f5f9, можно оставить, но этот мягче */
  --palette-text-muted:    #b8c2d1; /* было #cbd5e1 → чуть темнее, чтобы не сливаться */
  --palette-border:        #3a4a63; /* было #475569 */
  --palette-border-strong: #586a86; /* было #64748b */
  --palette-hover:         #263142; /* было #334155 */

  --palette-brand:   #6366f1;
  --palette-brand-2: #8b5cf6;

  --palette-good:    #10b981;
  --palette-neutral: #f59e0b;
  --palette-sad:     #3b82f6;
}

:root, [data-theme] {
  --palette-happy:   #16a34a; /* бодро-зелёный */
  --palette-pleased: #22c55e; /* твой текущий good */
  --palette-neutral: #eab308;
  --palette-sad:     #3b82f6;
  --palette-sorrow:  #2563eb; /* чуть глубже синего */

  /* шкала для слайдера (-3..+3) */
  --score-pos3:  #22c55e;
  --score-pos2:  color-mix(in srgb, #22c55e 75%, #ffffff 25%);
  --score-pos1:  color-mix(in srgb, #22c55e 50%, #ffffff 50%);
  --score-zero:  #eab308;
  --score-neg1:  color-mix(in srgb, #2563eb 50%, #ffffff 50%);
  --score-neg2:  color-mix(in srgb, #2563eb 75%, #ffffff 25%);
  --score-neg3:  #2563eb;

  /* заливки для календаря */
 /* Бакеты суммы (-50..+50) */
  --bucket-pos50: #16a34a; /* зелёный 100% */
  --bucket-pos40: color-mix(in srgb, #16a34a 80%, #ffffff 20%);
  --bucket-pos30: color-mix(in srgb, #16a34a 65%, #ffffff 35%);
  --bucket-pos20: color-mix(in srgb, #16a34a 50%, #ffffff 50%);
  --bucket-pos10: color-mix(in srgb, #16a34a 35%, #ffffff 65%);

  --bucket-zero:  #fde047; /* бледно-жёлтый (база) */

  --bucket-neg10: color-mix(in srgb, #1d4ed8 35%, #ffffff 65%); /* светло-синий */
  --bucket-neg20: color-mix(in srgb, #1d4ed8 50%, #ffffff 50%);
  --bucket-neg30: color-mix(in srgb, #1d4ed8 65%, #ffffff 35%);
  --bucket-neg40: color-mix(in srgb, #1d4ed8 80%, #ffffff 20%);
  --bucket-neg50: #1d4ed8; /* насыщенно-синий 100% */
}

:root {
   --calendar-fill-happy:   color-mix(in srgb, var(--palette-surface) 72%, var(--mood-happy) 28%);
   --calendar-fill-pleased: color-mix(in srgb, var(--palette-surface) 72%, var(--mood-pleased) 28%);
   --calendar-fill-neutral: color-mix(in srgb, var(--palette-surface) 76%, var(--mood-neutral) 24%);
   --calendar-fill-sad:     color-mix(in srgb, var(--palette-surface) 76%, var(--mood-sad) 24%);
   --calendar-fill-sorrow:  color-mix(in srgb, var(--palette-surface) 76%, var(--mood-sorrow) 24%);
}


/* Доп. палитры (опционально) */
[data-theme="light-nature"] {
  --palette-bg:#f0fdf4; --palette-surface:#ffffff;
  --palette-text:#1f2937; --palette-text-muted:#64748b;
  --palette-border:#dcfce7; --palette-border-strong:#86efac;
  --palette-hover:#ecfdf5;
  --palette-brand:#059669; --palette-brand-2:#047857;
  --palette-good:#16a34a; --palette-neutral:#ca8a04; --palette-sad:#0369a1;
}

[data-theme="light-ocean"] {
  --palette-bg:#f0f9ff; --palette-surface:#ffffff;
  --palette-text:#1f2937; --palette-text-muted:#64748b;
  --palette-border:#e0f2fe; --palette-border-strong:#93c5fd;
  --palette-hover:#eff6ff;
  --palette-brand:#0ea5e9; --palette-brand-2:#0284c7;
  --palette-good:#059669; --palette-neutral:#d97706; --palette-sad:#2563eb;
}

[data-theme="dark-space"] {
  --palette-bg:#0c0a09; --palette-surface:#1c1917;
  --palette-text:#fafaf9; --palette-text-muted:#d6d3d1;
  --palette-border:#292524; --palette-border-strong:#44403c;
  --palette-hover:#23201c;
  --palette-brand:#7c2d12; --palette-brand-2:#92400e;
  --palette-good:#10b981; --palette-neutral:#d97706; --palette-sad:#0ea5e9;
}

[data-theme="dark-purple"] {
  --palette-bg:#0f0a19; --palette-surface:#1e1b31;
  --palette-text:#f5f3ff; --palette-text-muted:#d8b4fe;
  --palette-border:#2e1065; --palette-border-strong:#581c87;
  --palette-hover:#2b2642;
  --palette-brand:#6366f1; --palette-brand-2:#8b5cf6;
  --palette-good:#22c55e; --palette-neutral:#fbbf24; --palette-sad:#60a5fa;
}

/* Авто-тёмная, если не указан data-theme явно */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --palette-bg: #0f172a;
    --palette-surface: #111827;
    --palette-text: #e5e7eb;
    --palette-text-muted: #9ca3af;
    --palette-border: #1f2937;
    --palette-border-strong: #374151;
    --palette-hover: #1b2435;

    --palette-brand: #6366f1;
    --palette-brand-2: #8b5cf6;

    --palette-good: #34d399;
    --palette-neutral: #f59e0b;
    --palette-sad: #60a5fa;
  }
}

/* ==========================================================
   SEMANTIC TOKENS (мост между палитрами и компонентами)
   ========================================================== */
:root, [data-theme] {
  /* Базовые поверхности и текст */
  --surface: var(--palette-bg);
  --surface-2: var(--palette-surface);
  --text: var(--palette-text);
  --text-muted: var(--palette-text-muted);

  /* Границы и состояния наведения */
  --border: var(--palette-border);
  --border-strong: var(--palette-border-strong);
  --hover: var(--palette-hover);

  /* Бренд и статусы */
  --brand: var(--palette-brand);
  --brand-2: var(--palette-brand-2);
  --success: var(--palette-good);
  --warning: var(--palette-neutral);
  --info: var(--palette-sad);

  /* Графики / диаграммы */
--mood-good: var(--mood-happy);
--mood-sad-old: var(--mood-sorrow);

/* расширенная шкала настроений (5 уровней) */
--mood-happy:   #22c55e;    /* зелёный */
--mood-pleased: #86efac;    /* светло‑зелёный */
--mood-neutral: #eab308;    /* жёлтый */
--mood-sad:     #93c5fd;    /* светло‑синий */
--mood-sorrow:  #2563eb;    /* насыщенный синий */

  /* Aliases for backward compatibility */
  --mood-good: var(--mood-happy);
  --mood-sad-old: var(--mood-sorrow);
  --mood-sad: var(--mood-sorrow);

  /* Текст/фон для инвертированных элементов */
  --on-brand: #ffffff;
}

/* ==========================================================
   BACKWARD COMPAT (чтобы не ломать существующие стили)
   ========================================================== */
:root, [data-theme] {
  --bg-primary: var(--surface);
  --bg-elevated: var(--surface-2);
  --bg-secondary: var(--surface-2);       /* если где-то используется */
  --text-primary: var(--text);
  --text-secondary: var(--text-muted);
  --border-color: var(--border);
  --border-hover: var(--border-strong);

  /* hover для дней календаря */
  --day-hover: var(--hover);

  /* настроения
   * Для трёхстарого API оставляем алиасы на новую палитру.
   * good → happy, neutral → neutral, sad → sorrow
   */
  --mood-good: var(--mood-happy);
  --mood-neutral: var(--mood-neutral);
  --mood-sad: var(--mood-sorrow);
}
