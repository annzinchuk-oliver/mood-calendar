/* ==========================================================
   TOKENS — единый источник правды для тем и скейлов
   Файл: styles/tokens.css
   ========================================================== */

/* =============== PRIMITIVE TOKENS (скейлы) =============== */
:root {
  /* Spacing — 8pt grid */
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-8: 32px;

  /* Radius */
  --radius-1: 8px;
  --radius-2: 12px;
  --radius-3: 16px;
  --radius-pill: 9999px;

  /* Typography */
  --font-sans: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Inter, Arial, "Apple Color Emoji","Segoe UI Emoji";
  --fs-xs: 12px;
  --fs-sm: 14px;
  --fs-md: 15px;
  --fs-lg: 16px;
  --fs-xl: 20px;

  /* Motion */
  --dur-1: .14s;
  --dur-2: .2s;
  --dur-3: .3s;
  --ease: cubic-bezier(.22,1,.36,1);

  /* Elevation (используются компонентами) */
  --shadow-sm: 0 2px 6px rgba(0,0,0,.08);
  --shadow-md: 0 8px 24px rgba(0,0,0,.12);
  --shadow-lg: 0 18px 40px rgba(0,0,0,.18);
}

/* ==========================================================
LIGHT THEME — базовые токены (по умолчанию)
   ========================================================== */
:root {
  /* фон/текст */
  --palette-surface: #ffffff;
  --palette-surface-variant: #f5f7fb;
  --text: #0b121a;
  --text-primary: #0b121a;
  --text-muted: #5b6675;

     /* базовые поверхности */
  --bg: #f5f7fb;
  --card: #ffffff;
  --surface-1: var(--bg);
  --surface-2: var(--card);
  --surface-3: color-mix(in srgb, #0b121a 6%, #ffffff 94%);

  --line: rgba(15, 18, 26, .08);

  --calendar-text-contrasted: #0b121a;
    /* акцент (брендовый) */
  --brand: #7c4dff;
  --brand-2: color-mix(in srgb, #7c4dff 82%, #4b2bbd 18%);
  --on-brand: #ffffff;
   
  --accent: var(--brand);
  --accent-10: color-mix(in srgb, var(--accent) 18%, transparent);
  --accent-20: color-mix(in srgb, var(--accent) 28%, transparent);
  --chip-bg: rgba(15, 18, 26, .05);
  --chip-bg-hover: rgba(15, 18, 26, .09);

  --badge-ochre-bg: #f2cc47;
  --badge-ochre-fg: #1e2329;
  --badge-ochre-ring: rgba(0, 0, 0, .18);

  --day-ochre-bg: #F3C969;
  --day-ochre-fg: #1f2328;
  --day-ochre-ring: rgba(0,0,0,.18);
  --day-ochre-hover: #efc253;


  --modal-bg: var(--card);
  --divider: rgba(15, 18, 26, .08);

  --axis-color: #5f6368;
  --grid-weak: rgba(0, 0, 0, .08);
  --grid-zero: rgba(0, 0, 0, .55);

  /* системные цвета */
  --palette-border: #d9dfeb;
  --palette-border-strong: #c3c9d4;
  --palette-hover: #eef1f7;
  --day-border: color-mix(in srgb, #000 30%, transparent);
  --day-bg: #ffffff;

  --palette-bg: var(--palette-surface-variant);
  --palette-text: var(--text-primary);
  --palette-text-muted: var(--text-muted);

  --palette-good:    #22c55e;
  --palette-neutral: #eab308;
  --palette-sad:     #3b82f6;

  /* бакеты календаря */
  --bucket-pos50: #016e29;
  --bucket-pos40: color-mix(in srgb, #016e29 80%, #ffffff 20%);
  --bucket-pos30: color-mix(in srgb, #016e29 65%, #ffffff 35%);
  --bucket-pos20: color-mix(in srgb, #016e29 50%, #ffffff 50%);
  --bucket-pos10: color-mix(in srgb, #016e29 35%, #ffffff 65%);

  --bucket-zero:  #fae370;
   
  --bucket-neg10: color-mix(in srgb, #1d4ed8 35%, #ffffff 65%);
  --bucket-neg20: color-mix(in srgb, #1d4ed8 50%, #ffffff 50%);
  --bucket-neg30: color-mix(in srgb, #1d4ed8 65%, #ffffff 35%);
  --bucket-neg40: color-mix(in srgb, #1d4ed8 80%, #ffffff 20%);
  --bucket-neg50: #1d4ed8;
}

:root[data-theme="light"] {
  --day-border: color-mix(in srgb, #000 30%, transparent);
  --day-bg: #ffffff;
}
/* ==========================================================
   DARK THEME — оверрайды для data-theme="dark"
   ========================================================== */
:root.theme-dark,
html.theme-dark,
[data-theme="dark"] {

  /* тёмная тема — мягче и читабельнее */
  --palette-surface: #171c22;
  --palette-surface-variant: #0f1318;
  --text: #e7edf5;
  --text-primary: #e7edf5;
  --text-muted: #a9b3bf;

  --bg: #0f1318;
  --card: #171c22;
  --surface-1: #0f1318;
  --surface-2: #171c22;
  --surface-3: #1d242c;

  --line: rgba(230, 237, 245, .10);

  --calendar-text-contrasted: #ffffff;

  --brand: #7c4dff;
  --brand-2: color-mix(in srgb, #7c4dff 72%, #433196 28%);
  --on-brand: #ffffff;

  --palette-border: rgba(230, 237, 245, .14);
  --palette-border-strong: rgba(230, 237, 245, .22);
  --palette-hover: rgba(255, 255, 255, .06);
  --day-border: rgba(231, 237, 245, .22);
  --day-bg: color-mix(in srgb, #ffffff 5%, transparent);
   
  --palette-bg: var(--palette-surface-variant);
  --palette-text: var(--text-primary);
  --palette-text-muted: var(--text-muted);

  --palette-good: #3adc70;
  --palette-neutral: #f0c75a;
  --palette-sad: #5e8ff2;

  --bucket-pos50: #1fa857;
  --bucket-pos40: color-mix(in srgb, #1fa857 78%, #0f1318 22%);
  --bucket-pos30: color-mix(in srgb, #1fa857 62%, #0f1318 38%);
  --bucket-pos20: color-mix(in srgb, #1fa857 48%, #0f1318 52%);
  --bucket-pos10: color-mix(in srgb, #1fa857 34%, #0f1318 66%);

  --bucket-zero:  #f0c75a;
  --bucket-neg10: color-mix(in srgb, #5e8ff2 42%, #0f1318 58%);
  --bucket-neg20: color-mix(in srgb, #4f7fe4 55%, #0f1318 45%);
  --bucket-neg30: color-mix(in srgb, #436fe0 68%, #0f1318 32%);
  --bucket-neg40: color-mix(in srgb, #3a63d6 80%, #0f1318 20%);
   
  --bucket-neg50: #1e3a8a;

  --accent: #8b5cf6;
  --accent-10: color-mix(in srgb, var(--accent) 16%, transparent);
  --accent-20: color-mix(in srgb, var(--accent) 28%, transparent);
  --chip-bg: rgba(255,255,255,.06);
  --chip-bg-hover: rgba(255,255,255,.10);

  --badge-ochre-bg: #f0c75a;
  --badge-ochre-fg: #1e2329;
  --badge-ochre-ring: rgba(0,0,0,.18);
   
  --day-ochre-bg: #F0C75A;
  --day-ochre-fg: #11151a;
  --day-ochre-ring: rgba(0,0,0,.28);
  --day-ochre-hover: #e7bb46;


  --modal-bg: var(--surface-2);
  --divider: rgba(230,237,245,.12);

  --axis-color: #a9b3bf;
  --grid-weak: rgba(231,237,245,.08);
  --grid-zero: rgba(231,237,245,.55);
}

/* ==========================================================
   SEMANTIC TOKENS (мост между палитрой и компонентами)
   ========================================================== */
:root, [data-theme] {

  --surface: var(--bg);
  --surface-2: var(--card);
  --text-muted: var(--text-muted);

  --border: var(--palette-border);
  --border-strong: var(--palette-border-strong);
  --hover: var(--palette-hover);

  --success: var(--palette-good);
  --warning: var(--palette-neutral);
  --info: var(--palette-sad);

    /* расширенная шкала настроений (5 уровней) */
  --mood-happy:   #22c55e;    /* зелёный */
  --mood-pleased: #86efac;    /* светло‑зелёный */
  --mood-neutral: #eab308;    /* жёлтый */
  --mood-sad:     #93c5fd;    /* светло‑синий */
  --mood-sorrow:  #2563eb;    /* насыщенный синий */

  /* алиасы для обратной совместимости */
  --mood-good: var(--mood-happy);
  --mood-sad-old: var(--mood-sorrow);

   
  /* шкала для слайдера (-3..+3) */
  --score-pos3:  #22c55e;
  --score-pos2:  color-mix(in srgb, #22c55e 75%, #ffffff 25%);
  --score-pos1:  color-mix(in srgb, #22c55e 50%, #ffffff 50%);
  --score-zero:  #eab308;
  --score-neg1:  color-mix(in srgb, #2563eb 50%, #ffffff 50%);
  --score-neg2:  color-mix(in srgb, #2563eb 75%, #ffffff 25%);
  --score-neg3:  #2563eb;

  /* заливки для календаря по шкале настроений */
  --calendar-fill-happy:   color-mix(in srgb, var(--palette-surface) 72%, var(--mood-happy) 28%);
  --calendar-fill-pleased: color-mix(in srgb, var(--palette-surface) 72%, var(--mood-pleased) 28%);
  --calendar-fill-neutral: color-mix(in srgb, var(--palette-surface) 76%, var(--mood-neutral) 24%);
  --calendar-fill-sad:     color-mix(in srgb, var(--palette-surface) 76%, var(--mood-sad) 24%);
  --calendar-fill-sorrow:  color-mix(in srgb, var(--palette-surface) 76%, var(--mood-sorrow) 24%);
   
  /* Текст/фон для инвертированных элементов */
  --on-brand: #ffffff;

  --bg-primary: var(--surface);
  --bg-elevated: var(--surface-2);
  --bg-secondary: var(--surface-2);      
  --text-primary: var(--text);
  --text-secondary: var(--text-muted);
  --border-color: var(--border);
  --border-hover: var(--border-strong);
  --day-hover: var(--hover);
}

/* Авто-тёмная, если не указан data-theme явно */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --palette-surface: #151a23;
    --palette-surface-variant: #1a202b;
    --text: #e8edf4; 
    --text-primary: #e8edf4;
    --text-muted: #aeb6c3;
    --calendar-text-contrasted: #ffffff;
    --brand: #7c4dff;
    --brand-2: color-mix(in srgb, #7c4dff 72%, #433196 28%);
    --on-brand: #ffffff;
    --palette-border: #202838;
    --palette-border-strong: #2f3a4d;
    --palette-hover: #20293a;
    --day-border: color-mix(in srgb, #fff 35%, transparent);
    --day-bg: color-mix(in srgb, #fff 2%, transparent);
    --palette-bg: var(--palette-surface-variant);
    --palette-text: var(--text-primary);
    --palette-text-muted: var(--text-muted);
    --palette-good: #1fa857;
    --palette-neutral: #f2cc47;
    --palette-sad: #3558d6;
    --bucket-pos50: #1fa857;
    --bucket-pos40: color-mix(in srgb, #1fa857 78%, #111827 22%);
    --bucket-pos30: color-mix(in srgb, #1fa857 62%, #111827 38%);
    --bucket-pos20: color-mix(in srgb, #1fa857 48%, #111827 52%);
    --bucket-pos10: color-mix(in srgb, #1fa857 34%, #111827 66%);
    --bucket-zero:  #f2cc47;
    --bucket-neg10: color-mix(in srgb, #3558d6 42%, #0b1220 58%);
    --bucket-neg20: color-mix(in srgb, #2b4fd1 55%, #0b1220 45%);
    --bucket-neg30: color-mix(in srgb, #2446c9 68%, #0b1220 32%);
    --bucket-neg40: color-mix(in srgb, #1f3fbd 80%, #0b1220 20%);
    --bucket-neg50: #1e3a8a;
  }
}
